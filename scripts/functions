# -*-Shell-script-*-
#
# cvl_functions This file contains functions to be used by most or all
#               shell scripts in the tool runner scripts.
#

originating_system=`tr -d '\n' < /etc/originating_system`
originating_system_version=`tr -d '\n' < /etc/originating_system_version`
package=`rpm -qf $0`
name=`echo "$package" | cut -d- -f2`
version=`echo "$package" | cut -d- -f3`
common_name="$originating_system $originating_system_version $name $version"

log_start() {
	start_ts=`date +"%F %T"`
	start_file_name="$start_ts ${common_name}.start"
	stdin_file_name="$start_ts ${common_name}.stdin"
	stdout_file_name="$start_ts ${common_name}.stdout"
	stderr_file_name="$start_ts ${common_name}.stderr"
	export stdin_file_name stdout_file_name stderr_file_name
	touch "$start_file_name"
	touch "$stdin_file_name"
	touch "$stdout_file_name"
	touch "$stderr_file_name"
	sudo /usr/local/logkeys/0.1.1a/bin/logkeys --start --output "$stdin_file_name"
}

log_stop() {
	sudo /usr/local/logkeys/0.1.1a/bin/logkeys --kill
	stop_ts=`date +"%F %T"`
	stop_file_name="$stop_ts ${common_name}.stop"
	touch "$stop_file_name"
}
